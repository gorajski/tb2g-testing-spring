If a @Configuration is lacking a @Profile, then it will always be included in the @ComponentScan.  You can use @Profile with @Primary to override this configuration with a second configuration.  In this case, @Profile will indicate that this component should be wired in as well as the component without an @Profile, while @Primary tells Spring that since these conflict with each other, use the one tagged @Primary. 